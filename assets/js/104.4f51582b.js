(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{436:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"实战篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实战篇"}},[s._v("#")]),s._v(" 实战篇")]),s._v(" "),t("p",[s._v("写前建议")]),s._v(" "),t("h2",{attrs:{id:"编写-mysql-触发器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编写-mysql-触发器"}},[s._v("#")]),s._v(" 编写 Mysql 触发器")]),s._v(" "),t("blockquote",[t("p",[s._v("1、第一条，可执行")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $$\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("trigger")]),s._v(" update_ai_alarm_status\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("after")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("update")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" t_ai_alarm_stat "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for each row")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("begin")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" new"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<>")]),s._v(" old"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" t_ai_alarm_20231011\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" org_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org_id\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" dev_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dev_id\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" channel_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("channel_id\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" alg_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alg_type\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" alert_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alert_type\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alert_date "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONVERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("alarm_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" t_ai_alarm_20231012\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" org_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org_id\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" dev_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dev_id\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" channel_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("channel_id\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" alg_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alg_type\n        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" alert_type "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alert_type\n\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alert_date "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONVERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("alarm_time"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("$$\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("p",[s._v("有个弊端，不灵活，需要写很多表进去")]),s._v(" "),t("blockquote",[t("p",[s._v("2、触发器中使用动态 sql，不可用，会报错")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" $$\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),s._v(" update_ai_alarm_status \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AFTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" t_ai_alarm_stat "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR EACH ROW")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<>")]),s._v(" OLD"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("status")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@today")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" DATE_FORMAT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NEW"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("alert_date"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%Y%m%d'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@update_status_sql")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" CONCAT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'UPDATE t_ai_alarm_'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@today")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\n        SET status = NEW.status\n        WHERE alarm_time = NEW.alert_date\n        AND org_id = NEW.org_id\n        AND dev_id = NEW.dev_id\n        AND channel_id = NEW.channel_id\n        AND alg_type = NEW.alg_type\n        AND alert_type = NEW.alert_type'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PREPARE")]),s._v(" create_stmt "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@update_status_sql")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXECUTE")]),s._v(" create_stmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEALLOCATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PREPARE")]),s._v(" create_stmt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("$$\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELIMITER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("报错：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1336 - Dynamic SQL is not allowed in stored function or trigger\nMySQL不允许在存储函数或触发器中使用动态SQL\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("参考：")]),s._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/qq_54169998/article/details/122720159",target:"_blank",rel:"noopener noreferrer"}},[s._v("【精选】【MySQL触发器】触发器的使用、创建、修改及删除_创建一个insert触发器_霸道小明的博客-CSDN博客"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/439273702",target:"_blank",rel:"noopener noreferrer"}},[s._v("MySQL 触发器使用教程 - 六种触发器案例详解 - 知乎 (zhihu.com)"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/yoursly/article/details/79360243?ops_request_misc=%7B%22request%5Fid%22%3A%22169813773816800225535196%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=169813773816800225535196&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-79360243-null-null.142%5Ev96%5Epc_search_result_base1&utm_term=%E6%9D%A1%E4%BB%B6%E8%A7%A6%E5%8F%91%E5%99%A8&spm=1018.2226.3001.4187",target:"_blank",rel:"noopener noreferrer"}},[s._v("触发器（三、条件触发）_触发器条件判断-CSDN博客"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://blog.csdn.net/qq_34745941/article/details/120454319?spm=1001.2101.3001.6650.7&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-7-120454319-blog-98871552.235%5Ev38%5Epc_relevant_default_base3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-7-120454319-blog-98871552.235%5Ev38%5Epc_relevant_default_base3&utm_relevant_index=14",target:"_blank",rel:"noopener noreferrer"}},[s._v("Mysql 预准备语句详解（prepare、execute、deallocate）_mysql prepare execute-CSDN博客"),t("OutboundLink")],1)])])]),s._v(" "),t("h2",{attrs:{id:"联表查询问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#联表查询问题"}},[s._v("#")]),s._v(" 联表查询问题")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 基础查询（49条记录）")]),s._v("\n\t\t\t "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" \n        \t\t "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n            t_maintenance_enterprise ent\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n            ent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("is_deleted "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 反例（18）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n            t_maintenance_enterprise ent\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEFT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v("\n            t_maintenance_maintainer main\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" ent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enterprise_id\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" ent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("is_deleted "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("is_deleted "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 正例（53）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n            t_maintenance_enterprise ent\n                "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEFT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v("\n            t_maintenance_maintainer main\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" ent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enterprise_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("and")]),s._v(" main"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("is_deleted "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" ent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("is_deleted "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n          \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("h2",{attrs:{id:"mapping-xml-使用问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mapping-xml-使用问题"}},[s._v("#")]),s._v(" Mapping.xml 使用问题")]),s._v(" "),t("h3",{attrs:{id:"号的使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#号的使用"}},[s._v("#")]),s._v(" <= 号的使用")]),s._v(" "),t("div",{staticClass:"language-xml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-xml"}},[t("code",[s._v("...\nand alert_date "),t("span",{pre:!0,attrs:{class:"token cdata"}},[s._v("<![CDATA[ >= ]]>")]),s._v(" #{dto.startDay}\n..\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("em",[s._v("其他写法")])]),s._v(" "),t("p",[s._v("参考文章："),t("a",{attrs:{href:"https://blog.csdn.net/xuanzhangran/article/details/60329357",target:"_blank",rel:"noopener noreferrer"}},[s._v("mybatis中大于等于小于等于的写法_mybatis大于小于-CSDN博客"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"count-和-count-1-的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#count-和-count-1-的区别"}},[s._v("#")]),s._v(" count(*) 和 count(1) 的区别")]),s._v(" "),t("p",[t("code",[s._v("COUNT(*)")]),s._v(" 和 "),t("code",[s._v("COUNT(1)")]),s._v(" 都是用于统计行数的聚合函数，但它们在实现方式上有一些区别。")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("COUNT(*)")]),s._v("："),t("code",[s._v("COUNT(*)")]),s._v(" 用于"),t("strong",[s._v("计算表中的所有行数")]),s._v("，无论行中的数据是否为 NULL。它会对表的每一行进行计数，包括 NULL 值行。\n"),t("ul",[t("li",[s._v("因此，"),t("code",[s._v("COUNT(*)")]),s._v(" 返回的结果是表的总行数。")])])]),s._v(" "),t("li",[t("code",[s._v("COUNT(1)")]),s._v("："),t("code",[s._v("COUNT(1)")]),s._v(" 也用于计算表中的行数，但它不关心行中的实际数据或 NULL 值。它会将一个常量值 1 应用于每一行，并对每一行进行计数。因为它"),t("strong",[s._v("只是对每一行应用一个固定值，而不需要访问实际的数据内容")]),s._v("。\n"),t("ul",[t("li",[s._v("所以在某些数据库系统中，"),t("code",[s._v("COUNT(1)")]),s._v(" 的性能可能会比 "),t("code",[s._v("COUNT(*)")]),s._v(" 稍微好一些。")])])])]),s._v(" "),t("p",[t("em",[s._v("两者的区别可以总结如下：")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("COUNT(*)")]),s._v(" 对表的每一行进行计数，包括 NULL 值行。")]),s._v(" "),t("li",[t("code",[s._v("COUNT(1)")]),s._v(" 将一个常量值 1 应用于每一行进行计数，不考虑行中的实际数据或 NULL 值。")])]),s._v(" "),t("p",[s._v("在实际使用中，通常使用 "),t("code",[s._v("COUNT(*)")]),s._v(" 来统计行数，因为它更符合直觉和语义。而 "),t("code",[s._v("COUNT(1)")]),s._v(" 则可以作为一种性能优化手段，在某些情况下可能会稍微提高查询的执行速度。")]),s._v(" "),t("h2",{attrs:{id:"获取行号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取行号"}},[s._v("#")]),s._v(" 获取行号")]),s._v(" "),t("p",[s._v("利用 "),t("code",[s._v("ROW_NUMBER()")]),s._v(" 函数。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v("\n  ROW_NUMBER"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("over")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" town"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" market"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" rowNumber"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\ttown"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tmarket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v("\n\ttbl_ent \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v("\n\tis_deleted "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" create_time "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("BETWEEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2023-08-27 15:01:09'")]),s._v(" \n\t"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("AND")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2023-08-29 15:01:09'")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("GROUP")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v("\n\ttown"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\tmarket"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h2",{attrs:{id:"distinct-子句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#distinct-子句"}},[s._v("#")]),s._v(" DISTINCT 子句")]),s._v(" "),t("ul",[t("li",[s._v("用于返回"),t("strong",[s._v("唯一不同的值")]),s._v("，通常与 SELECT 子句一起使用，消除结果集中的重复行。")])]),s._v(" "),t("h2",{attrs:{id:"替换字段值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#替换字段值"}},[s._v("#")]),s._v(" 替换字段值")]),s._v(" "),t("p",[s._v("用 "),t("code",[s._v("replace")]),s._v(" 方法：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" your_table_name\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" your_column_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLACE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("your_column_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'替换前字符串'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'替换后字符串'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("用途：比如可以用来替换路径前缀")]),s._v(" "),t("h2",{attrs:{id:"截取字段值"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#截取字段值"}},[s._v("#")]),s._v(" 截取字段值")]),s._v(" "),t("p",[s._v("用 "),t("code",[s._v("substring + LENGTH")]),s._v(" 方法：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" t_file \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" no_prefix_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" SUBSTRING"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" file_path"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" LENGTH"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'http://172.16.27.40:9001'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# file_path = http://127.0.0.1:8080/xxxx")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 赋值之后")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# no_prefix_path = /xxxx")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"分页查询的-sql-编写"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分页查询的-sql-编写"}},[s._v("#")]),s._v(" 分页查询的 sql 编写")]),s._v(" "),t("p",[s._v("分页查询的 SQL 语句通常包括以下部分：")]),s._v(" "),t("ol",[t("li",[t("code",[s._v("SELECT")]),s._v(" 语句：选择需要查询的字段。")]),s._v(" "),t("li",[t("code",[s._v("FROM")]),s._v(" 语句：指定要查询的表。")]),s._v(" "),t("li",[t("code",[s._v("WHERE")]),s._v(" 语句（可选）：添加筛选条件。")]),s._v(" "),t("li",[t("code",[s._v("ORDER BY")]),s._v(" 语句（可选）：对结果进行排序。")]),s._v(" "),t("li",[t("code",[s._v("LIMIT")]),s._v(" 和 "),t("code",[s._v("OFFSET")]),s._v(" 语句：实现分页功能。")])]),s._v(" "),t("p",[s._v("以下是一个分页查询的 SQL 示例：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" 表名\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" 条件\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ORDER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BY")]),s._v(" 排序字段\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" 每页数量 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFFSET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("当前页数 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" 每页数量；\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[t("strong",[s._v("注意：")])]),s._v(" "),t("p",[s._v('实际使用中需要将 "表名"、"条件"、"排序字段"、"每页数量" 和 "当前页数" 替换为实际的值。')]),s._v(" "),t("p",[t("strong",[s._v("两种写法：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("table")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LIMIT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("offset")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("OFFSET")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("offset")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("⚠️"),t("code",[s._v("LIMIT")]),s._v(" 子句可以被用于指定 "),t("code",[s._v("SELECT")]),s._v(" 语句返回的记录数。")]),s._v(" "),t("p",[s._v("需注意以下几点：")]),s._v(" "),t("ul",[t("li",[s._v("第一个参数指定第一个返回记录行的偏移量，注意从 "),t("code",[s._v("0")]),s._v(" 开始")]),s._v(" "),t("li",[s._v("第二个参数指定返回记录行的最大数目")]),s._v(" "),t("li",[s._v("如果只给定一个参数：它表示返回最大的记录行数目")]),s._v(" "),t("li",[s._v("第二个参数为 "),t("code",[s._v("-1")]),s._v(" 表示检索从某一个偏移量到记录集的结束所有的记录行("),t("strong",[s._v("目前 MySQL 已经不支持这种语法了")]),s._v(")")]),s._v(" "),t("li",[s._v("初始记录行的偏移量是 0 (而不是 1)")])]),s._v(" "),t("h2",{attrs:{id:"sql-的执行顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sql-的执行顺序"}},[s._v("#")]),s._v(" SQL 的执行顺序⭐️")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("FROM 子句：")]),s._v(" "),t("ul",[t("li",[s._v("查询首先从 FROM 子句开始，确定要检索数据的表。")]),s._v(" "),t("li",[s._v("确定要检索数据的表或多个表的组合。")])])]),s._v(" "),t("li",[t("strong",[s._v("JOIN 子句：")]),s._v(" "),t("ul",[t("li",[s._v("在选择的表中，根据 JOIN 子句中的条件，将相关联的行连接在一起。JOIN 的执行顺序可能受到优化器的干预，选择最优的连接方式。")])])]),s._v(" "),t("li",[t("strong",[s._v("ON 子句：")]),s._v(" "),t("ul",[t("li",[s._v("（如果使用了 JOIN）用于指定连接表时的条件，决定了哪些行应该被包含在结果集中。")])])]),s._v(" "),t("li",[t("strong",[s._v("WHERE 子句：")]),s._v(" "),t("ul",[t("li",[s._v("接着，在 FROM 和 JOIN 的基础上，根据 WHERE 子句中的条件对表进行筛选，只保留符合条件的行。")])])]),s._v(" "),t("li",[t("strong",[s._v("GROUP BY 子句：")]),s._v(" "),t("ul",[t("li",[s._v("根据指定的 GROUP BY 列对数据进行分组。")])])]),s._v(" "),t("li",[t("strong",[s._v("HAVING 子句：")]),s._v(" "),t("ul",[t("li",[s._v("类似于 WHERE，但作用于 GROUP BY 的结果，用于过滤组。")]),s._v(" "),t("li",[s._v("对【"),t("strong",[s._v("分组后的结果集")]),s._v("】进行进一步的过滤，条件通常与聚合函数（如 COUNT, SUM 等）一起使用。")])])]),s._v(" "),t("li",[t("strong",[s._v("SELECT 子句：")]),s._v(" "),t("ul",[t("li",[s._v("根据 SELECT 子句中的列，选择要返回的结果列。")]),s._v(" "),t("li",[s._v("确定要返回的列或计算结果，包括聚合函数和表达式。")])])]),s._v(" "),t("li",[t("strong",[s._v("DISTINCT 子句：")]),s._v(" "),t("ul",[t("li",[s._v("用于去除 SELECT 语句结果集中的重复行。")])])]),s._v(" "),t("li",[t("strong",[s._v("ORDER BY 子句：")]),s._v(" "),t("ul",[t("li",[s._v("如果有 ORDER BY 子句，则对结果集进行排序。")])])]),s._v(" "),t("li",[t("strong",[s._v("LIMIT 子句：")])])]),s._v(" "),t("ul",[t("li",[s._v("用于限制返回结果集的行数（仅在某些数据库系统中，如 MySQL）。")])]),s._v(" "),t("ol",{attrs:{start:"11"}},[t("li",[t("strong",[s._v("OFFSET 子句：")]),s._v(" "),t("ul",[t("li",[s._v("与 LIMIT 子句一起使用，用于指定返回结果集的起始行（仅在某些数据库系统中）。")]),s._v(" "),t("li",[s._v("常用于分页（传统分页，游标分页）")])])]),s._v(" "),t("li",[t("strong",[s._v("UNION/UNION ALL 子句：")]),s._v(" "),t("ul",[t("li",[s._v("将多个 SELECT 语句的结果集合并在一起，去除重复的行（"),t("code",[s._v("UNION")]),s._v("）或包含所有行（"),t("code",[s._v("UNION ALL")]),s._v("）。")])])])]),s._v(" "),t("h2",{attrs:{id:"转换字段类型返回"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#转换字段类型返回"}},[s._v("#")]),s._v(" 转换字段类型返回")]),s._v(" "),t("p",[s._v("CAST 函数用于将某种数据类型的表达式显式转换为另一种数据类型。"),t("code",[s._v("CAST()")]),s._v(" 函数的参数是一个表达式，它包括用 AS 关键字分隔的源值和目标数据类型。")]),s._v(" "),t("p",[s._v("语法：")]),s._v(" "),t("blockquote",[t("p",[s._v("CAST (expression AS data_type)")])]),s._v(" "),t("ul",[t("li",[t("code",[s._v("expression")]),s._v("：任何有效的 SQServer 表达式。")]),s._v(" "),t("li",[t("code",[s._v("AS")]),s._v("：用于分隔两个参数，在 AS 之前的是要处理的数据，在 AS 之后是要转换的数据类型。")]),s._v(" "),t("li",[t("code",[s._v("data_type")]),s._v("：目标系统所提供的数据类型，包括 bigint 和 sql_variant，不能使用用户定义的数据类型。")])]),s._v(" "),t("p",[s._v("可以转换的类型是有限制的。这个类型可以是以下值其中的一个：")]),s._v(" "),t("ol",[t("li",[s._v("二进制，同带 binary 前缀的效果: BINARY")]),s._v(" "),t("li",[s._v("字符型，可带参数：CHAR()")]),s._v(" "),t("li",[s._v("日期：DATE")]),s._v(" "),t("li",[s._v("时间: TIME")]),s._v(" "),t("li",[s._v("日期时间型：DATETIME")]),s._v(" "),t("li",[s._v("浮点数：DECIMAL\n"),t("ul",[t("li",[t("code",[s._v("DECIMAL(m, n)")]),s._v("，其中 "),t("code",[s._v("m")]),s._v(" 和 "),t("code",[s._v("n")]),s._v(" 是 "),t("code",[s._v("DECIMAL")]),s._v(" 类型的小数位数和总位数。")])])]),s._v(" "),t("li",[s._v("整数：SIGNED")]),s._v(" "),t("li",[s._v("无符号整数：UNSIGNED")])]),s._v(" "),t("h3",{attrs:{id:"代码示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#代码示例"}},[s._v("#")]),s._v(" 代码示例")]),s._v(" "),t("p",[t("code",[s._v("CAST")]),s._v(" 函数在 MySQL 中用于将一个值从一种数据类型转换为另一种数据类型。以下是一些使用 "),t("code",[s._v("CAST")]),s._v(" 函数的代码示例：")]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("将字符串转换为整数")]),s._v("：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" SIGNED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这将把字符串 "),t("code",[s._v("'123'")]),s._v(" 转换为整数 "),t("code",[s._v("123")]),s._v("。")]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("strong",[s._v("将浮点数转换为整数")]),s._v("：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123.456")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" SIGNED"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这将把浮点数 "),t("code",[s._v("123.456")]),s._v(" 转换为整数 "),t("code",[s._v("123")]),s._v("，小数部分被舍去。")]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("strong",[s._v("将整数转换为浮点数")]),s._v("：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECIMAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这将把整数 "),t("code",[s._v("123")]),s._v(" 转换为浮点数 "),t("code",[s._v("123.00")]),s._v("，保留两位小数。")]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[t("strong",[s._v("将字符串转换为日期")]),s._v("：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2024-04-14'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这将把字符串 "),t("code",[s._v("'2024-04-14'")]),s._v(" 转换为日期 "),t("code",[s._v("2024-04-14")]),s._v("。")]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[t("strong",[s._v("将字符串转换为时间")]),s._v("：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'11:53:18'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TIME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这将把字符串 "),t("code",[s._v("'11:53:18'")]),s._v(" 转换为时间 "),t("code",[s._v("11:53:18")]),s._v("。")]),s._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[t("strong",[s._v("将字符串转换为日期时间")]),s._v("：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2024-04-14 11:53:18'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATETIME")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这将把字符串 "),t("code",[s._v("'2024-04-14 11:53:18'")]),s._v(" 转换为【日期时间】 "),t("code",[s._v("2024-04-14 11:53:18")]),s._v("。")]),s._v(" "),t("ol",{attrs:{start:"7"}},[t("li",[t("strong",[s._v("将字符串转换为二进制")]),s._v("：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" CAST"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Hello World'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BINARY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这将把字符串 "),t("code",[s._v("'Hello World'")]),s._v(" 转换为长度为 11 的二进制字符串。")]),s._v(" "),t("h2",{attrs:{id:"学习参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#学习参考"}},[s._v("#")]),s._v(" 学习参考")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/156072321",target:"_blank",rel:"noopener noreferrer"}},[s._v("面试官：数据量很大，分页查询很慢，有什么优化方案？ - 知乎 (zhihu.com)"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/613936857",target:"_blank",rel:"noopener noreferrer"}},[s._v("SQL进阶技巧——CASE表达式全解！ - 知乎 (zhihu.com)"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://blog.csdn.net/qq_21101587/article/details/78642423",target:"_blank",rel:"noopener noreferrer"}},[s._v("SQL中的cast()函数_cast sql-CSDN博客"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=e.exports}}]);