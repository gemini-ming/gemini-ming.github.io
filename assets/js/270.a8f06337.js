(window.webpackJsonp=window.webpackJsonp||[]).push([[270],{645:function(t,e,r){"use strict";r.r(e);var n=r(4),_=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"唯一索引和逻辑删除冲突解决方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#唯一索引和逻辑删除冲突解决方法"}},[t._v("#")]),t._v(" 唯一索引和逻辑删除冲突解决方法")]),t._v(" "),e("h2",{attrs:{id:"实现方案"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#实现方案"}},[t._v("#")]),t._v(" 实现方案")]),t._v(" "),e("ol",[e("li",[t._v("与【删除标识】关联做联合唯一索引\n"),e("ul",[e("li",[t._v("设置删除标识为 "),e("code",[t._v("null")])]),t._v(" "),e("li",[t._v("设置删除标识为 "),e("code",[t._v("Now()")])]),t._v(" "),e("li",[t._v("设置删除标识为 "),e("code",[t._v("主键 id")])])])]),t._v(" "),e("li",[t._v("新增个【虚拟列】字段 -- del_unique_key\n"),e("ul",[e("li",[t._v("默认为 "),e("code",[t._v("空")]),t._v(" 或 "),e("code",[t._v("0")]),t._v("，逻辑删除时设置为 "),e("code",[t._v("主键 id")]),t._v(" 或 其他唯一字段值")])])]),t._v(" "),e("li",[t._v("不采用逻辑删除，直接采用物理删除")]),t._v(" "),e("li",[t._v("写多一个逻辑删除恢复的接口（可以利用打印日志来定位记录需要恢复数据的 "),e("code",[t._v("id")]),t._v("）")])]),t._v(" "),e("h2",{attrs:{id:"学习参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#学习参考"}},[t._v("#")]),t._v(" 学习参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://blog.csdn.net/YXXXYX/article/details/125546093",target:"_blank",rel:"noopener noreferrer"}},[t._v("唯一性索引与逻辑删除冲突问题解决思路_逻辑删除和唯一索引冲突怎么解决-CSDN博客"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/684215081",target:"_blank",rel:"noopener noreferrer"}},[t._v("解决数据库逻辑删除与唯一索引冲突的几种思路 - 知乎 (zhihu.com)"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://juejin.cn/post/6897236850849513486",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何解决逻辑删除与数据库唯一约束冲突 - 掘金 (juejin.cn)"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=_.exports}}]);